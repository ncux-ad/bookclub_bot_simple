# Архитектура проекта BookClub Bot

## Общее описание
Telegram-бот для управления книжным клубом с функциями организации встреч, управления библиотекой и коммуникации участников. Проект следует принципам SOLID, KISS и DRY.

## Компоненты системы

### Ядро (Core)
- **bot_simple.py** - точка входа, инициализация бота (упрощенная версия)
- **config.py** - улучшенная конфигурация с валидацией
- **main.py** - главный файл приложения (планируется)

### База данных
- **data/** - JSON файлы данных
  - users.json - база пользователей
  - books.json - база книг
  - events.json - база встреч

### Утилиты (utils/)
- **data_manager.py** - менеджер данных с кэшированием
- **security.py** - утилиты безопасности
- **logger.py** - система логирования

### Сервисы (services/) - планируется
- **books.py** - управление книгами
- **events.py** - управление встречами
- **users.py** - управление пользователями

### Обработчики (handlers/) - планируется
- **user_handlers.py** - команды пользователей
- **admin_handlers.py** - админские команды

### UI компоненты (keyboards/) - планируется
- **inline.py** - inline-клавиатуры
- **reply.py** - reply-клавиатуры

## Принципы архитектуры

### SOLID принципы
- **S** - Единственная ответственность: каждый класс имеет одну задачу
- **O** - Открытость/закрытость: расширение без изменения
- **L** - Подстановка Лисков: наследники заменяют базовые классы
- **I** - Разделение интерфейсов: клиенты не зависят от неиспользуемых методов
- **D** - Инверсия зависимостей: зависимости от абстракций

### Дополнительные принципы
- **KISS** - Keep It Simple, Stupid: простота решений
- **DRY** - Don't Repeat Yourself: избежание дублирования
- **YAGNI** - You Aren't Gonna Need It: не добавлять преждевременно

## Взаимодействие компонентов
1. Запросы пользователей обрабатываются через handlers/
2. Handlers используют services/ для бизнес-логики
3. Services работают с данными через utils/data_manager.py
4. Общие утилиты доступны через utils/
5. Конфигурация централизована в config.py

## Безопасность
- Все секреты хранятся в .env
- Валидация входных данных через utils/security.py
- Логирование исключает чувствительные данные
- Защита от XSS и инъекций
- Система сессий и блокировки

## Производительность
- Кэширование данных с TTL
- Асинхронная обработка запросов
- Оптимизированная работа с файлами
- Ротация логов

## Развёртывание
- Требуется Python 3.10+
- Зависимости в requirements.txt
- Настройка через переменные окружения
- Автоматическое создание директорий
